# Скрипты для запуска приложения

Этот каталог содержит скрипты для автоматизации запуска React Native Android приложения.

## Доступные скрипты

### 1. `start-android.ps1` (PowerShell)
Автоматизированный скрипт для запуска приложения, который:
- ✅ Настраивает `adb reverse` для подключения к Metro bundler
- ✅ Запускает Metro bundler в отдельном окне
- ✅ Запускает Android приложение
- ✅ Проверяет подключенные устройства

**Использование:**
```powershell
# Способ 1: Прямой запуск
.\scripts\start-android.ps1

# Способ 2: Через npm
npm run android:auto
```

### 2. `start-android.bat` (Batch)
Альтернативный скрипт для пользователей, предпочитающих batch файлы.

**Использование:**
```cmd
# Способ 1: Прямой запуск
scripts\start-android.bat

# Способ 2: Через npm
npm run android:auto:bat
```

## Доступные npm команды

После установки зависимостей (`npm install`) доступны следующие команды:

### Основные команды

```bash
# Автоматический запуск (рекомендуется)
npm run android:auto          # PowerShell скрипт
npm run android:auto:bat      # Batch скрипт

# Обычный запуск (без автоматизации)
npm run android               # Только сборка и запуск
npm start                     # Только Metro bundler
npm run start:reset           # Metro с очисткой кеша

# Настройка adb reverse вручную
npm run setup:adb             # Настроить adb reverse
```

## Требования

- ✅ Node.js >= 20
- ✅ Android SDK установлен
- ✅ Android эмулятор запущен или устройство подключено
- ✅ PowerShell (для .ps1 скрипта) или CMD (для .bat скрипта)

## Как это работает

1. **Проверка устройств**: Скрипт проверяет наличие подключенных устройств или эмуляторов
2. **Настройка adb reverse**: Автоматически настраивает перенаправление порта 8081 для Metro bundler
3. **Запуск Metro**: Запускает Metro bundler в отдельном окне для удобного просмотра логов
4. **Сборка и запуск**: Собирает и устанавливает приложение на устройство/эмулятор

## Решение проблем

### Проблема: "Unable to load script"
**Решение**: Убедитесь, что:
- Эмулятор запущен или устройство подключено
- `adb reverse` настроен правильно (запустите `npm run setup:adb`)
- Metro bundler запущен и доступен на порту 8081

### Проблема: "adb не найден"
**Решение**: 
- Убедитесь, что Android SDK установлен
- Проверьте путь в `android/local.properties`
- По умолчанию используется: `%LOCALAPPDATA%\Android\Sdk`

### Проблема: Metro bundler не запускается
**Решение**:
- Закройте все старые процессы Metro
- Запустите `npm run start:reset` вручную
- Проверьте, что порт 8081 свободен

## Полезные команды

```bash
# Проверка подключенных устройств
adb devices

# Настройка adb reverse вручную
adb reverse tcp:8081 tcp:8081

# Очистка кеша Metro
npm start -- --reset-cache

# Очистка кеша Gradle
cd android && gradlew clean
```

## Дополнительная информация

Для получения дополнительной информации см. [официальную документацию React Native](https://reactnative.dev/docs/getting-started).

